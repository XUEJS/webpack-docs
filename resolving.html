<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta name="description" content="">
		<meta name="author" content="">
		<link rel="icon" type="image/png" href="/assets/favicon.png" />
		<link rel="stylesheet" href="css/doc.css" />
		<title>resolving</title>
	</head>
	<body>
		<script src="js/doc.js" charset="utf-8" async></script>
		<div class="container">
			<div class="row">
				<div class="col-md-3 nav">

					<div class="logo">
	<ul class="cube-inner">
		<li class="front"><li class="back"><li class="right"><li class="left"><li class="top"><li class="bottom">
	</ul>
	<ul class="cube">
		<li class="front"><li class="back"><li class="right"><li class="left"><li class="top"><li class="bottom">
		<li class="floor">
	</ul>
</div>
<div class="name">webpack</div>
<div class="tagline">MODULE BUNDLER</div>


					<div class="sidebar">
						<ul><li><a href=".">Home</a></li></ul>
						<ul>
<li>入门<ul>
<li><a href="motivation.html">动机</a></li>
<li><a href="what-is-webpack.html">什么是的WebPack？</a></li>
<li><a href="installation.html">安装</a></li>
<li><a href="usage.html">用法</a></li>
<li>Require Modules</li>
<li>Vendor Modules</li>
<li><a href="using-loaders.html">使用加载器</a></li>
<li><a href="using-plugins.html">使用插件</a></li>
<li><a href="dev-tools.html">开发工具</a></li>
<li><a href="troubleshooting.html">故障排除</a></li>
</ul>
</li>
<li>教程与示例<ul>
<li><a href="http://webpack.github.io/docs/tutorials/getting-started/">入门</a></li>
<li><a href="list-of-tutorials.html">教程列表</a></li>
<li><a href="examples.html">示例</a></li>
</ul>
</li>
<li>指南<ul>
<li><a href="commonjs.html">CommonJs</a></li>
<li><a href="amd.html">AMD</a></li>
<li><a href="webpack-for-browserify-users.html">Browserify 用户</a></li>
<li><a href="code-splitting.html">代码分割</a></li>
<li><a href="stylesheets.html">样式表</a></li>
<li><a href="optimization.html">优化</a></li>
<li><a href="long-term-caching.html">长期缓存</a></li>
<li><a href="how-to-write-a-loader.html">如何写一个加载器</a></li>
<li>如何写一个插件(How to write a plugin)</li>
<li><a href="multiple-entry-points.html">多个入口点</a>(Multiple entry points)</li>
<li><a href="library-and-externals.html">库和扩展</a>(Library and externals)</li>
<li><a href="shimming-modules.html">垫片模块</a>(Shimming modules)</li>
<li><a href="testing.html">测试</a></li>
<li><a href="build-performance.html">构建性能</a></li>
<li><a href="hot-module-replacement-with-webpack.html">模块热替换</a>(Hot Module Replacement with webpack)</li>
<li><a href="comparison.html">比较</a></li>
</ul>
</li>
<li>webpack 相关<ul>
<li><a href="usage-with-grunt.html">使用 Grunt</a></li>
<li><a href="usage-with-gulp.html">使用 Gulp</a></li>
<li><a href="usage-with-bower.html">使用 Bower</a></li>
<li><a href="usage-with-karma.html">使用 Karma</a></li>
</ul>
</li>
<li>列表<ul>
<li><a href="loader-conventions.html">加载器约定</a></li>
<li><a href="list-of-loaders.html">加载器列表</a></li>
<li><a href="list-of-plugins.html">插件列表</a></li>
<li><a href="list-of-tutorials.html">教程列表</a></li>
</ul>
</li>
<li>API<ul>
<li><a href="configuration.html">构造</a></li>
<li><a href="cli.html">CLI</a></li>
<li><a href="node.js-api.html">Node.js API</a></li>
<li><a href="api-in-modules.html">API in modules</a></li>
<li><a href="loaders.html">Loaders</a></li>
<li><a href="plugins.html">Plugins</a></li>
<li><a href="context.html">Context</a></li>
<li><a href="resolving.html">Resolving</a></li>
<li><a href="hot-module-replacement.html">Hot Module Replacement</a></li>
<li>开发工具<ul>
<li><a href="webpack-dev-server.html">webpack-dev-server</a></li>
<li><a href="webpack-dev-middleware.html">webpack-dev-middleware</a></li>
</ul>
</li>
</ul>
</li>
<li>Development<ul>
<li><a href="changelog.html">更新日志</a></li>
<li><a href="roadmap.html">路线图</a></li>
<li><a href="ideas.html">思路</a></li>
<li>贡献 (Contributing)</li>
</ul>
</li>
</ul>

					</div>
				</div>

				<div class="col-md-9">

					<div class="pull-right">
						<a href="https://github.com/XUEJS/webpack-docs/wiki/resolving/_edit" id="wikieditlink">Edit</a>
					</div>
					<div class="row">
						<div class="col-md-12 page-header">
							<h1 id="wikititle">resolving</h1>
						</div>
					</div>

					<div class="row">
						<div id="wiki" class="col-md-12">
							<div class="contents"><ul><li><a href="#resolving-an-absolute-path">Resolving an absolute path</a></li><li><a href="#resolving-a-relative-path">Resolving a relative path</a></li><li><a href="#resolving-a-module-path">Resolving a module path</a></li><li><a href="#aliasing">Aliasing</a></li><li><a href="#caching">Caching</a></li><li><a href="#unsafe-caching">Unsafe caching</a></li><li><a href="#context">Context</a></li><li><a href="#loaders">Loaders</a></li><li><a href="#asynchronous">Asynchronous</a></li></ul></li></ul></div><p>The resolving process is pretty simple. We distinguish three types of requests:</p>
<ul>
<li>absolute path: <code>require(<span class="string">"/home/me/file"</span>)</code> <code>require(<span class="string">"C:\Home\me\file"</span>)</code></li>
<li>relative path: <code>require(<span class="string">"../src/file"</span>)</code> <code>require(<span class="string">"./file"</span>)</code></li>
<li>module path: <code>require(<span class="string">"module"</span>)</code> <code>require(<span class="string">"module/lib/file"</span>)</code></li>
</ul>
<h2 id="resolving-an-absolute-path"><a class="anchor" href="#resolving-an-absolute-path">&rarr;</a>Resolving an absolute path</h2>
<p>We first check if the path points to a directory. For a directory we need to find the main file in this directory. Therefore the <code>main</code> field in the <code>package.json</code> is joined to the path. If there is no <code>package.json</code> or no <code>main</code> field, <code>index</code> is used as filename.</p>
<p>We have an absolute path to a file now. We try to append all extensions (configuration option <code>resolve.extensions</code>). The first existing file is used as result.</p>
<h2 id="resolving-a-relative-path"><a class="anchor" href="#resolving-a-relative-path">&rarr;</a>Resolving a relative path</h2>
<p>The context directory is the directory of the resource file that contains the <code>require</code> statement. If there is no resource file the configuration option <code>context</code> is used as context directory. (This can occur for entry points or with loader-generated files).</p>
<p>The relative path is joined to the context directory and the resulting absolute file is resolved according to “Resolving an absolute path”.</p>
<h2 id="resolving-a-module-path"><a class="anchor" href="#resolving-a-module-path">&rarr;</a>Resolving a module path</h2>
<p>For resolving a module we first gather all search directories for modules from the context directory. This process is similar to the <a href="http://nodejs.org/api/modules.html">node.js resolving process</a>, but the search directories are configurable with the configuration option <code>resolve.modulesDirectories</code>. In addition to this the directories in the configuration option <code>resolve.root</code> are prepended and directories in the configuration option <code>resolve.fallback</code> are appended.</p>
<p>The module is looked up in each module directory and resolved according to “Resolving an absolute path”. If the first match has no success, the second is tried and so on.</p>
<h2 id="aliasing"><a class="anchor" href="#aliasing">&rarr;</a>Aliasing</h2>
<p>There is a configuration option <code>resolve.alias</code> which renames modules.</p>
<p>When trying to “resolve a module path” the module name is matched to the <code>resolve.alias</code> option and when there is a match it gets replaced with the alias.</p>
<h2 id="caching"><a class="anchor" href="#caching">&rarr;</a>Caching</h2>
<p>Every filesystem access is cached so that multiple parallel or serial requests to the same thing are merged. In watching mode only changed files are removed from cache (the watcher knows which files got changed). In non-watching mode the cache is purged before every compilation.</p>
<h2 id="unsafe-caching"><a class="anchor" href="#unsafe-caching">&rarr;</a>Unsafe caching</h2>
<p>There is a configuration option <code>resolve.unsafeCache</code> which boosts performance by aggressive caching.</p>
<p>Every resolve process is cached and isn’t ever purged. This is correct in most cases, but incorrect in edge cases (<em>what edge cases?</em>).</p>
<h2 id="context"><a class="anchor" href="#context">&rarr;</a>Context</h2>
<p>When trying to resolve a <a href="context.html">context</a> “Resolving an absolute path” ends when a directory is found.</p>
<h2 id="loaders"><a class="anchor" href="#loaders">&rarr;</a>Loaders</h2>
<p>For loaders the configuration options in <code>resolveLoader</code> are used.</p>
<p>In addition to that when trying to “resolve a module path” all module name variations in the configuration option <code>resolveLoader.moduleTemplates</code> are tried.</p>
<h2 id="asynchronous"><a class="anchor" href="#asynchronous">&rarr;</a>Asynchronous</h2>
<p>The above description suggests a serial process, but in the implementation the process is completely asynchronous and parallel. This may causes more filesystem access than required.</p>

						</div>
					</div>

					<div class="row">
						<div class="col-md-12">
							<div id="disqus_thread"></div>
						</div>
					</div>
				</div>

			</div>
		</div>
		<a href="https://github.com/webpack/webpack"><img style="position: absolute; top: 0; left: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_left_orange_ff7600.png" alt="Fork me on GitHub"></a>
	</body>
</html>