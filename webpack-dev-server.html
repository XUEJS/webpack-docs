<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta name="description" content="">
		<meta name="author" content="">
		<link rel="icon" type="image/png" href="/assets/favicon.png" />
		<link rel="stylesheet" href="css/doc.css" />
		<title>webpack dev server</title>
	</head>
	<body>
		<script src="js/doc.js" charset="utf-8" async></script>
		<div class="container">
			<div class="row">
				<div class="col-md-3 nav">

					<div class="logo">
	<ul class="cube-inner">
		<li class="front"><li class="back"><li class="right"><li class="left"><li class="top"><li class="bottom">
	</ul>
	<ul class="cube">
		<li class="front"><li class="back"><li class="right"><li class="left"><li class="top"><li class="bottom">
		<li class="floor">
	</ul>
</div>
<div class="name">webpack</div>
<div class="tagline">MODULE BUNDLER</div>


					<div class="sidebar">
						<ul><li><a href=".">Home</a></li></ul>
						<ul>
<li>入门<ul>
<li><a href="motivation.html">动机</a></li>
<li><a href="what-is-webpack.html">什么是的WebPack？</a></li>
<li><a href="installation.html">安装</a></li>
<li><a href="usage.html">用法</a></li>
<li>Require Modules</li>
<li>Vendor Modules</li>
<li><a href="using-loaders.html">使用加载器</a></li>
<li><a href="using-plugins.html">使用插件</a></li>
<li><a href="dev-tools.html">开发工具</a></li>
<li><a href="troubleshooting.html">故障排除</a></li>
</ul>
</li>
<li>教程与示例<ul>
<li><a href="http://webpack.github.io/docs/tutorials/getting-started/">入门</a></li>
<li><a href="list-of-tutorials.html">教程列表</a></li>
<li><a href="examples.html">示例</a></li>
</ul>
</li>
<li>指南<ul>
<li><a href="commonjs.html">CommonJs</a></li>
<li><a href="amd.html">AMD</a></li>
<li><a href="webpack-for-browserify-users.html">Browserify 用户</a></li>
<li><a href="code-splitting.html">代码分割</a></li>
<li><a href="stylesheets.html">样式表</a></li>
<li><a href="optimization.html">优化</a></li>
<li><a href="long-term-caching.html">长期缓存</a></li>
<li><a href="how-to-write-a-loader.html">如何写一个加载器</a></li>
<li>如何写一个插件(How to write a plugin)</li>
<li><a href="multiple-entry-points.html">多个入口点</a>(Multiple entry points)</li>
<li><a href="library-and-externals.html">库和扩展</a>(Library and externals)</li>
<li><a href="shimming-modules.html">垫片模块</a>(Shimming modules)</li>
<li><a href="testing.html">测试</a></li>
<li><a href="build-performance.html">构建性能</a></li>
<li><a href="hot-module-replacement-with-webpack.html">模块热替换</a>(Hot Module Replacement with webpack)</li>
<li><a href="comparison.html">比较</a></li>
</ul>
</li>
<li>webpack 相关<ul>
<li><a href="usage-with-grunt.html">使用 Grunt</a></li>
<li><a href="usage-with-gulp.html">使用 Gulp</a></li>
<li><a href="usage-with-bower.html">使用 Bower</a></li>
<li><a href="usage-with-karma.html">使用 Karma</a></li>
</ul>
</li>
<li>列表<ul>
<li><a href="loader-conventions.html">加载器约定</a></li>
<li><a href="list-of-loaders.html">加载器列表</a></li>
<li><a href="list-of-plugins.html">插件列表</a></li>
<li><a href="list-of-tutorials.html">教程列表</a></li>
</ul>
</li>
<li>API<ul>
<li><a href="configuration.html">构造</a></li>
<li><a href="cli.html">CLI</a></li>
<li><a href="node.js-api.html">Node.js API</a></li>
<li><a href="api-in-modules.html">API in modules</a></li>
<li><a href="loaders.html">Loaders</a></li>
<li><a href="plugins.html">Plugins</a></li>
<li><a href="context.html">Context</a></li>
<li><a href="resolving.html">Resolving</a></li>
<li><a href="hot-module-replacement.html">Hot Module Replacement</a></li>
<li>开发工具<ul>
<li><a href="webpack-dev-server.html">webpack-dev-server</a></li>
<li><a href="webpack-dev-middleware.html">webpack-dev-middleware</a></li>
</ul>
</li>
</ul>
</li>
<li>Development<ul>
<li><a href="changelog.html">更新日志</a></li>
<li><a href="roadmap.html">路线图</a></li>
<li><a href="ideas.html">思路</a></li>
<li>贡献 (Contributing)</li>
</ul>
</li>
</ul>

					</div>
				</div>

				<div class="col-md-9">

					<div class="pull-right">
						<a href="https://github.com/XUEJS/webpack-docs/wiki/webpack-dev-server/_edit" id="wikieditlink">Edit</a>
					</div>
					<div class="row">
						<div class="col-md-12 page-header">
							<h1 id="wikititle">webpack dev server</h1>
						</div>
					</div>

					<div class="row">
						<div id="wiki" class="col-md-12">
							<div class="contents"><ul><li><a href="#content-base">Content Base</a></li><li><a href="#automatic-refresh">Automatic Refresh</a><ul><li><a href="#iframe-mode">Iframe mode</a></li><li><a href="#inline-mode">Inline mode</a><ul><li><a href="#inline-mode-with-node-js-api">Inline mode with node.js API</a></li><li><a href="#inline-mode-in-html">Inline mode in HTML</a></li></ul></li><li><a href="#hot-module-replacement">Hot Module Replacement</a><ul><li><a href="#hot-module-replacement-with-inline-mode-on-cli">Hot Module Replacement with Inline mode on CLI</a></li><li><a href="#hot-module-replacement-with-node-js-api">Hot Module Replacement with node.js API</a></li></ul></li></ul></li><li><a href="#webpack-dev-server-cli">webpack-dev-server CLI</a></li><li><a href="#api">API</a></li><li><a href="#combining-with-an-existing-server">Combining with an existing server</a></li></ul></li></ul></div><p>The <em>webpack-dev-server</em> is a little node.js <a href="http://expressjs.com/">Express</a> server, which uses the <em><a href="webpack-dev-middleware.html">webpack-dev-middleware</a></em> to serve a <em>webpack bundle</em>. It also has a little runtime which is connected to the server via <a href="http://socket.io/">Socket.IO</a>. The server emits information about the compilation state to the client, which reacts to those events. You can choose between different modes, depending on your needs. So lets say you have the following config file:</p>
<pre><code><span class="keyword">var</span> path = require(<span class="string">"path"</span>);
module.exports = {
  entry: {
    app: [<span class="string">"./app/main.js"</span>]
  },
  output: {
    path: path.resolve(__dirname, <span class="string">"build"</span>),
    publicPath: <span class="string">"/assets/"</span>,
    filename: <span class="string">"bundle.js"</span>
  }
};</code></pre><p>You have an <code>app</code> folder with your initial entry point that <em>webpack</em> will bundle into a <code>bundle.js</code> file in the <code>build</code> folder.</p>
<h2 id="content-base"><a class="anchor" href="#content-base">&rarr;</a>Content Base</h2>
<p>The <em>webpack-dev-server</em> will serve the files in the current directory, unless you configure a specific content base. </p>
<pre><code>$ webpack-dev-server --content-base public/</code></pre><p>Using this config <em>webpack-dev-server</em> will serve the static files in your <code>public</code> folder. It’ll watch your source files for changes and when changes are made the <em>bundle</em> will be recompiled. This modified <em>bundle</em> is served from memory at the relative path specified in <code>publicPath</code> (see <a href="#api">API</a>). It will not be written to your configured output directory. Where a <em>bundle</em> already exists at the same url path the <em>bundle</em> in memory will take precedence (by default).</p>
<p>For example with the configuration above your <em>bundle</em> will be available at <code>localhost:<span class="number">8080</span>/assets/bundle.js</code></p>
<p>To load your bundled files, you will need to create an <code>index.html</code> file in the <code>public</code> folder from which static files are served (<code>--content-base</code> option). e.g:</p>
<pre><code><span class="doctype">&lt;!DOCTYPE html&gt;</span>
<span class="tag">&lt;<span class="title">html</span> <span class="attribute">lang</span>=<span class="value">"en"</span>&gt;</span>
<span class="tag">&lt;<span class="title">head</span>&gt;</span>
  <span class="tag">&lt;<span class="title">meta</span> <span class="attribute">charset</span>=<span class="value">"UTF-8"</span>&gt;</span>
  <span class="tag">&lt;<span class="title">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="title">title</span>&gt;</span>
<span class="tag">&lt;/<span class="title">head</span>&gt;</span>
<span class="tag">&lt;<span class="title">body</span>&gt;</span>
  <span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"bundle.js"</span>&gt;</span><span class="javascript"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span>
<span class="tag">&lt;/<span class="title">body</span>&gt;</span>
<span class="tag">&lt;/<span class="title">html</span>&gt;</span></code></pre><p>By default go to <code>localhost:<span class="number">8080</span>/</code> to launch your app. For example with the configuration above (with publicPath) go to <code>localhost:<span class="number">8080</span>/assets/</code>.</p>
<h2 id="automatic-refresh"><a class="anchor" href="#automatic-refresh">&rarr;</a>Automatic Refresh</h2>
<p>The <em>webpack-dev-server</em> supports multiple modes to automatic refresh the page:</p>
<ul>
<li>Iframe mode (page is embedded in an iframe and reloaded on change)</li>
<li>Inline mode (a small webpack-dev-server client entry is added to the bundle which refresh the page on change)</li>
</ul>
<p>Each mode also supports Hot Module Replacement in which the bundle is notified that a change happened instead of a full page reload. A Hot Module Replacement runtime could than load the updated modules and inject them into the running app.</p>
<h3 id="iframe-mode"><a class="anchor" href="#iframe-mode">&rarr;</a>Iframe mode</h3>
<p>To use the iframe mode no additional configuration is needed. Just navigate the browser to <code>http:<span class="comment">//&lt;host&gt;:&lt;port&gt;/webpack-dev-server/&lt;path&gt;</span></code>. I. e. with the above configuration <code>http:<span class="comment">//localhost:8080/webpack-dev-server/index.html</span></code>.</p>
<ul>
<li>No configuration change needed.</li>
<li>Nice information bar on top of your app.</li>
<li>Url changes in the app are <strong>not</strong> reflected in the browsers url bar.</li>
</ul>
<h3 id="inline-mode"><a class="anchor" href="#inline-mode">&rarr;</a>Inline mode</h3>
<p>To the use inline mode specify <code>--inline</code> on the command line (you cannot specify it in the configuration). This adds the webpack-dev-server client entry point to the webpack configuration. There is no change in the url required. Just navigate to <code>http:<span class="comment">//&lt;host&gt;:&lt;port&gt;/&lt;path&gt;</span></code>. I. e. with the above configuration <code>http:<span class="comment">//localhost:8080/index.html</span></code>.</p>
<ul>
<li>Command line flag needed.</li>
<li>Status information in the browser log.</li>
<li>Url changes in the app are reflected in the browsers url bar.</li>
</ul>
<h4 id="inline-mode-with-node-js-api"><a class="anchor" href="#inline-mode-with-node-js-api">&rarr;</a>Inline mode with node.js API</h4>
<p>There is no <code>inline: <span class="literal">true</span></code> flag in the webpack-dev-server configuration, because the webpack-dev-server module has no access to the webpack configuration. Instead the user have to add the webpack-dev-server client entry point to the webpack configuration.</p>
<p>To do this just add <code>webpack-dev-server/client?http:<span class="comment">//&lt;path&gt;:&lt;port&gt;</span></code> to (all) entry point(s). I. e. with the above configuration:</p>
<pre><code>var config = require(&quot;./webpack.config.js&quot;);
config.entry.app.unshift(&quot;webpack-dev-server?http://localhost:8080&quot;);
var compiler = webpack(config);
var server = new webpackDevServer(compiler, {...});
server.listen(8080);</code></pre><h4 id="inline-mode-in-html"><a class="anchor" href="#inline-mode-in-html">&rarr;</a>Inline mode in HTML</h4>
<p>There is also the option to add a reference to the webpack-dev-server client script to the HTML page:</p>
<pre><code><span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"http://localhost:8080/webpack-dev-server.js"</span>&gt;</span><span class="javascript"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></code></pre><h3 id="hot-module-replacement"><a class="anchor" href="#hot-module-replacement">&rarr;</a>Hot Module Replacement</h3>
<p>To enable Hot Module Replacement with the webpack-dev-server specify <code>--hot</code> on the command line. This adds the <code>HotModuleReplacementPlugin</code> to the webpack configuration.</p>
<p>The easiest way to use Hot Module Replacement with the webpack-dev-server is to use the inline mode.</p>
<h4 id="hot-module-replacement-with-inline-mode-on-cli"><a class="anchor" href="#hot-module-replacement-with-inline-mode-on-cli">&rarr;</a>Hot Module Replacement with Inline mode on CLI</h4>
<p>There is nothing more needed. <code>--inline --hot</code> does all the relevant work automatically. The CLI of the webpack-dev-server automatically adds the special <code>webpack/hot/dev-server</code> entry point to your configuration.</p>
<p>Just navigate to <code>http:<span class="comment">//&lt;host&gt;:&lt;port&gt;/&lt;path&gt;</span></code> and let the magic happen.</p>
<p>You should see the following messages in the browser log:</p>
<pre><code>[HMR] Waiting for update signal from WDS...
[WDS] Hot Module Replacement enabled.</code></pre><p>Messages prefixed with <code>[HMR]</code> orginate from the <code>webpack/hot/dev-server</code> module. Messages prefixed with <code>[WDS]</code> orginate from the webpack-dev-server client.</p>
<p>It’s important the specify a correct <code>output.publicPath</code> elsewise hot update chunks cannot be loaded.</p>
<h4 id="hot-module-replacement-with-node-js-api"><a class="anchor" href="#hot-module-replacement-with-node-js-api">&rarr;</a>Hot Module Replacement with node.js API</h4>
<p>Similar to the inline mode the user have to do changes to the webpack configuration.</p>
<p>Three changes are needed:</p>
<ul>
<li>add an entry point to the webpack configuration: <code>webpack/hot/dev-server</code>.</li>
<li>add the <code><span class="keyword">new</span> webpack.HotModuleReplacementPlugin()</code> to the webpack configuration.</li>
<li>add <code>hot: <span class="literal">true</span></code> the the webpack-dev-server configuration to enable HMR on the server.</li>
</ul>
<p>I. e. with the above configuration:</p>
<pre><code>var config = require(&quot;./webpack.config.js&quot;);
config.entry.app.unshift(&quot;webpack-dev-server?http://localhost:8080&quot;, &quot;webpack/hot/dev-server&quot;);
var compiler = webpack(config);
var server = new webpackDevServer(compiler, {
  hot: true
  ...
});
server.listen(8080);</code></pre><h2 id="webpack-dev-server-cli"><a class="anchor" href="#webpack-dev-server-cli">&rarr;</a>webpack-dev-server CLI</h2>
<pre><code>$ webpack-dev-server &lt;entry&gt;</code></pre><p>All <em>webpack</em> <a href="cli.html">CLI</a> options are valid for the <em>webpack-dev-server</em> CLI too, but there is no <code>&lt;output&gt;</code> default argument. For the <em>webpack-dev-server</em> CLI a <code>webpack.config.js</code> (or the file passed by the <code>--config</code> option) is accepted as well.</p>
<p>There are some additional options:</p>
<ul>
<li><code>--content-base &lt;file/directory/url/port&gt;</code>: base path for the content.</li>
<li><code>--quiet</code>: don’t output anything to the console.</li>
<li><code>--no-info</code>: suppress boring information.</li>
<li><code>--colors</code>: add some colors to the output.</li>
<li><code>--no-colors</code>: don’t used colors in the output.</li>
<li><code>--host &lt;hostname/ip&gt;</code>: hostname or IP.</li>
<li><code>--port &lt;number&gt;</code>: port.</li>
<li><code>--inline</code>: embed the <em>webpack-dev-server</em> runtime into the <em>bundle</em>.</li>
<li><code>--hot</code>: adds the <code>HotModuleReplacementPlugin</code> and switch the server to <em>hot mode</em>. Note: make sure you don’t add <code>HotModuleReplacementPlugin</code> twice.</li>
<li><code>--hot --inline</code> also adds the <code>webpack/hot/dev-server</code> entry.</li>
<li><code>--lazy</code>: no watching, compiles on request (cannot be combined with <code>--hot</code>).</li>
<li><code>--https</code>: serves <em>webpack-dev-server</em> over HTTPS Protocol. Includes a self-signed certificate that is used when serving the requests.</li>
<li><code>--cert</code>, <code>--cacert</code>, <code>--key</code>: Paths the certificate files.</li>
</ul>
<p>Configuration under <code>devServer</code> in <code>webpack.config.js</code> are merged with the CLI options. For options under <code>devServer</code> see next section.</p>
<h2 id="api"><a class="anchor" href="#api">&rarr;</a>API</h2>
<pre><code><span class="keyword">var</span> WebpackDevServer = require(<span class="string">"webpack-dev-server"</span>);
<span class="keyword">var</span> webpack = require(<span class="string">"webpack"</span>);

<span class="keyword">var</span> compiler = webpack({
  <span class="comment">// configuration</span>
});
<span class="keyword">var</span> server = <span class="keyword">new</span> WebpackDevServer(compiler, {
  <span class="comment">// webpack-dev-server options</span>

  contentBase: <span class="string">"/path/to/directory"</span>,
  <span class="comment">// or: contentBase: "http://localhost/",</span>

  hot: <span class="literal">true</span>,
  <span class="comment">// Enable special support for Hot Module Replacement</span>
  <span class="comment">// Page is no longer updated, but a "webpackHotUpdate" message is send to the content</span>
  <span class="comment">// Use "webpack/hot/dev-server" as additional module in your entry point</span>
  <span class="comment">// Note: this does _not_ add the `HotModuleReplacementPlugin` like the CLI option does. </span>

  <span class="comment">// Set this as true if you want to access dev server from arbitrary url.</span>
  <span class="comment">// This is handy if you are using a html5 router.</span>
  historyApiFallback: <span class="literal">false</span>,

  <span class="comment">// Set this if you want webpack-dev-server to delegate a single path to an arbitrary server.</span>
  <span class="comment">// Use "*" to proxy all paths to the specified server.</span>
  <span class="comment">// This is useful if you want to get rid of 'http://localhost:8080/' in script[src],</span>
  <span class="comment">// and has many other use cases (see https://github.com/webpack/webpack-dev-server/pull/127 ).</span>
  proxy: {
    <span class="string">"*"</span>: <span class="string">"http://localhost:9090"</span>
  }

  <span class="comment">// webpack-dev-middleware options</span>
  quiet: <span class="literal">false</span>,
  noInfo: <span class="literal">false</span>,
  lazy: <span class="literal">true</span>,
  filename: <span class="string">"bundle.js"</span>,
  watchOptions: {
    aggregateTimeout: <span class="number">300</span>,
    poll: <span class="number">1000</span>
  },
  publicPath: <span class="string">"/assets/"</span>,
  headers: { <span class="string">"X-Custom-Header"</span>: <span class="string">"yes"</span> },
  stats: { colors: <span class="literal">true</span> },
});
server.listen(<span class="number">8080</span>, <span class="string">"localhost"</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span> {</span>});</code></pre><p>See <em><a href="webpack-dev-middleware.html">webpack-dev-middleware</a></em> for documentation on middleware options.</p>
<p>Notice that <em>webpack configuration</em> is not passed to <code>WebpackDevServer</code> API, thus <code>devServer</code> option in webpack configuration is not used in this case. Also, there is no <em>inline mode</em> for <code>WebpackDevServer</code> API. <code>&lt;script src=<span class="string">"http://localhost:8080/webpack-dev-server.js"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span></code> should be inserted to HTML page manually.</p>
<h2 id="combining-with-an-existing-server"><a class="anchor" href="#combining-with-an-existing-server">&rarr;</a>Combining with an existing server</h2>
<p>You may want to run a backend server or a mock of it in development. You should <strong>not</strong> use the <em>webpack-dev-server</em> as a backend. Its only purpose is to serve static (webpacked) assets.</p>
<p>You can run two servers side-by-side: The <em>webpack-dev-server</em> and your backend server.</p>
<p>In this case you need to teach the webpack-generated assets to make requests to the <em>webpack-dev-server</em> even when running on a HTML-page sent by the backend server. On the other side you need to teach your backend server to generate HTML pages that include <code>script</code> tags that point to assets on the <em>webpack-dev-server</em>. In addition to that you need a connection between the <em>webpack-dev-server</em> and the <em>webpack-dev-server</em> runtime to trigger reloads on recompilation.</p>
<p>To teach <em>webpack</em> to make requests (for chunk loading or HMR) to the <em>webpack-dev-server</em> you need to provide <strong>a full URL in the <code>output.publicPath</code></strong> option.</p>
<p>To make a connection between <em>webpack-dev-server</em> and its runtime best use the <em>inline mode</em> with <code>--inline</code>. The <em>webpack-dev-server</em> CLI automatically includes an entry point which establishes a WebSocket connection. (You can also use the <em>iframe</em> mode if you point <code>--content-base</code> of the <em>webpack-dev-server</em> to your backend server.</p>
<p>When you use the <em>inline mode</em> just open the backend server URL in your web browsers. (If you use the <em>iframe mode</em> open the <code>/webpack-dev-server/</code> prefixed URL of the <em>webpack-dev-server</em>.)</p>
<p>Summary and example:</p>
<ul>
<li><em>webpack-dev-server</em> on port <code><span class="number">8080</span></code>.</li>
<li>backend server on port <code><span class="number">9090</span></code>.</li>
<li>generate HTML pages with <code>&lt;script src=<span class="string">"http://localhost:8080/assets/bundle.js"</span>&gt;</code>.</li>
<li>webpack configuration with <code>output.publicPath = <span class="string">"http://localhost:8080/assets/"</span></code>.</li>
<li><em>inline mode</em>:<ul>
<li><code>--inline</code>.</li>
<li>open <code>http:<span class="comment">//localhost:9090</span></code>.</li>
</ul>
</li>
<li>or <em>iframe mode</em>:<ul>
<li><em>webpack-dev-server</em> <code>contentBase = <span class="string">"http://localhost:9090/"</span></code> (<code>--content-base</code>).</li>
<li>open <code>http:<span class="comment">//localhost:8080/webpack-dev-server/</span></code>.</li>
</ul>
</li>
</ul>
<p>Or use the proxy option…</p>

						</div>
					</div>

					<div class="row">
						<div class="col-md-12">
							<div id="disqus_thread"></div>
						</div>
					</div>
				</div>

			</div>
		</div>
		<a href="https://github.com/webpack/webpack"><img style="position: absolute; top: 0; left: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_left_orange_ff7600.png" alt="Fork me on GitHub"></a>
	</body>
</html>